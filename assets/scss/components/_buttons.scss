@use "../base/variables" as *;
@use "../base/mixins" as *;

%uk-md-base {
    position: relative;
    overflow: hidden; // for ripple
    border-radius: $border-radius-main;
    padding: 0.5rem 0.9rem;
    align-items: center;
    gap: 0.5rem;
    cursor: pointer;
    -webkit-user-select: none;
    -ms-user-select: none;
    user-select: none;
    -webkit-tap-highlight-color: transparent;

    @include box-shadow(
        0 1px 3px rgba(21, 21, 21, 0.08),
        0 1px 2px rgba(21, 21, 21, 0.04)
    );
    transition:
        transform 160ms cubic-bezier(0.2, 0.8, 0.2, 1),
        box-shadow 160ms ease,
        background-color 160ms ease;

    &:focus-visible {
        outline: none;
        box-shadow: 0 0 0 4px rgba(33, 150, 243, 0.12);
    }

    &::after {
        content: "";
        position: absolute;
        border-radius: 50%;
        transform: translate(-50%, -50%) scale(0);
        opacity: 0.9;
        pointer-events: none;
        width: 12px;
        height: 12px;
        left: 50%;
        top: 50%;
        background: rgba(255, 255, 255, 0.18);
        transition:
            transform 420ms cubic-bezier(0.22, 0.61, 0.36, 1),
            opacity 420ms;
    }
    &:active::after {
        transform: translate(-50%, -50%) scale(8);
        opacity: 0;
        transition: none;
    }

    .uk-button__icon {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 20px;
        height: 20px;
    }
}

.btn,
.uk-button {
    @include box-shadow($shadow-light);
    @include transition(
        color,
        background-color,
        background,
        box-shadow,
        transform,
        top,
        border-radius,
        border-color,
        filter,
        text-shadow
    );

    border: 0;
    @extend %uk-md-base;

    &.uk-button-default {
        background: $button-img center center / cover no-repeat;
        color: #fff;
    }
    // Generate color variants via a map to keep source concise while preserving output
    $__button_color_variants: (
        success: $color-success,
        info: $color-info,
        warning: $color-warning,
        danger: $color-danger
    );

    @each $variant, $bg in $__button_color_variants {
        &.uk-button-#{$variant} {
            background: $bg;
            color: #fff;
        }
    }

    &--clickable {
        cursor: pointer;
        &:active {
            transform: translateY(1px);
            @include box-shadow(0 4px 10px rgba(21, 21, 21, 0.12));
        }
    }
    &--elevated {
        @include box-shadow(
            0 3px 6px rgba(21, 21, 21, 0.12),
            0 1px 3px rgba(21, 21, 21, 0.08)
        );
    }
    &--outlined {
        background: transparent;
        border: 1px solid rgba(0, 0, 0, 0.08);
        box-shadow: none;
        color: inherit;
    }
    &--dense {
        padding: 0.25rem 0.5rem;
        border-radius: 3px;
        font-size: 0.875rem;
    }
    &--icon {
        padding: 0.375rem;
        width: 36px;
        height: 36px;
        justify-content: center;
        border-radius: 50%;
    }
    &.uk-icon {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 20px;
        height: 20px;
    }

    &--dark {
        &::after {
            background: rgba(0, 0, 0, 0.18);
        }
    }

    &:hover,
    &:active,
    &:focus {
        border-radius: 4px;
        background: unset;
        background-color: $color-primary;
        box-shadow: none !important;
        outline: none;
    }
    &:focus-visible {
        outline: none;
        border-radius: 4px;
        box-shadow: 0 0 0 4px rgba(33, 150, 243, 0.12);
    }
}
